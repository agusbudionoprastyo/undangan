(()=>{var we=Object.create;var le=Object.defineProperty;var Ae=Object.getOwnPropertyDescriptor;var Te=Object.getOwnPropertyNames;var ke=Object.getPrototypeOf,xe=Object.prototype.hasOwnProperty;var Ee=(_,n)=>()=>(n||_((n={exports:{}}).exports,n),n.exports);var Se=(_,n,i,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of Te(n))!xe.call(_,p)&&p!==i&&le(_,p,{get:()=>n[p],enumerable:!(a=Ae(n,p))||a.enumerable});return _};var Le=(_,n,i)=>(i=_!=null?we(ke(_)):{},Se(n||!_||!_.__esModule?le(i,"default",{value:_,enumerable:!0}):i,_));var fe=Ee(oe=>{(function(){"use strict";var _=function(){this.init()};_.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||x(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var r=t._howls[o]._getSoundIds(),l=0;l<r.length;l++){var u=t._howls[o]._soundById(r[l]);u&&u._node&&(u._node.volume=u._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||x(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var r=t._howls[o]._getSoundIds(),l=0;l<r.length;l++){var u=t._howls[o]._soundById(r[l]);u&&u._node&&(u._node.muted=e?!0:u._muted)}return t},stop:function(){for(var e=this||n,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,x()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var t=new Audio;typeof t.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t=typeof Audio<"u"?new Audio:null}catch{return e}if(!t||typeof t.canPlayType!="function")return e;var o=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",l=r.match(/OPR\/(\d+)/g),u=l&&parseInt(l[0].split("/")[1],10)<33,d=r.indexOf("Safari")!==-1&&r.indexOf("Chrome")===-1,v=r.match(/Version\/(.*?) /),w=d&&v&&parseInt(v[1],10)<15;return e._codecs={mp3:!!(!u&&(o||t.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!o,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(o){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch{e.noAudio=!0;break}for(var l=0;l<e._howls.length;l++)if(!e._howls[l]._webAudio)for(var u=e._howls[l]._getSoundIds(),d=0;d<u.length;d++){var v=e._howls[l]._soundById(u[d]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}e._autoResume();var w=e.ctx.createBufferSource();w.buffer=e._scratchBuffer,w.connect(e.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),w.onended=function(){w.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var A=0;A<e._howls.length;A++)e._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&typeof Promise<"u"&&(t instanceof Promise||typeof t.then=="function")&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!n.usingWebAudio)){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var o=0;o<e._howls[t]._sounds.length;o++)if(!e._howls[t]._sounds[o]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var r=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(r,r)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!n.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var n=new _,i=function(e){var t=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}t.init(e)};i.prototype={init:function(e){var t=this;return n.ctx||x(),t._autoplay=e.autoplay||!1,t._format=typeof e.format!="string"?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src=typeof e.src!="string"?e.src:[e.src],t._volume=e.volume!==void 0?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t._preload!=="none"&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var r,l;if(e._format&&e._format[o])r=e._format[o];else{if(l=e._src[o],typeof l!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=/^data:audio\/([^;,]+);/i.exec(l),r||(r=/\.([^.]+)$/.exec(l.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&n.codecs(r)){t=e._src[o];break}}if(!t){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=t,e._state="loading",window.location.protocol==="https:"&&t.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&f(e),e},play:function(e,t){var o=this,r=null;if(typeof e=="number")r=e,e=null;else{if(typeof e=="string"&&o._state==="loaded"&&!o._sprite[e])return null;if(typeof e>"u"&&(e="__default",!o._playLock)){for(var l=0,u=0;u<o._sounds.length;u++)o._sounds[u]._paused&&!o._sounds[u]._ended&&(l++,r=o._sounds[u]._id);l===1?e=null:r=null}}var d=r?o._soundById(r):o._inactiveSound();if(!d)return null;if(r&&!e&&(e=d._sprite||"__default"),o._state!=="loaded"){d._sprite=e,d._ended=!1;var v=d._id;return o._queue.push({event:"play",action:function(){o.play(v)}}),v}if(r&&!d._paused)return t||o._loadQueue("play"),d._id;o._webAudio&&n._autoResume();var w=Math.max(0,d._seek>0?d._seek:o._sprite[e][0]/1e3),A=Math.max(0,(o._sprite[e][0]+o._sprite[e][1])/1e3-w),S=A*1e3/Math.abs(d._rate),B=o._sprite[e][0]/1e3,s=(o._sprite[e][0]+o._sprite[e][1])/1e3;d._sprite=e,d._ended=!1;var m=function(){d._paused=!1,d._seek=w,d._start=B,d._stop=s,d._loop=!!(d._loop||o._sprite[e][2])};if(w>=s){o._ended(d);return}var h=d._node;if(o._webAudio){var k=function(){o._playLock=!1,m(),o._refreshBuffer(d);var c=d._muted||o._muted?0:d._volume;h.gain.setValueAtTime(c,n.ctx.currentTime),d._playStart=n.ctx.currentTime,typeof h.bufferSource.start>"u"?d._loop?h.bufferSource.noteGrainOn(0,w,86400):h.bufferSource.noteGrainOn(0,w,A):d._loop?h.bufferSource.start(0,w,86400):h.bufferSource.start(0,w,A),S!==1/0&&(o._endTimers[d._id]=setTimeout(o._ended.bind(o,d),S)),t||setTimeout(function(){o._emit("play",d._id),o._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?k():(o._playLock=!0,o.once("resume",k),o._clearTimer(d._id))}else{var L=function(){h.currentTime=w,h.muted=d._muted||o._muted||n._muted||h.muted,h.volume=d._volume*n.volume(),h.playbackRate=d._rate;try{var c=h.play();if(c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")?(o._playLock=!0,m(),c.then(function(){o._playLock=!1,h._unlocked=!0,t?o._loadQueue():o._emit("play",d._id)}).catch(function(){o._playLock=!1,o._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),d._ended=!0,d._paused=!0})):t||(o._playLock=!1,m(),o._emit("play",d._id)),h.playbackRate=d._rate,h.paused){o._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||d._loop?o._endTimers[d._id]=setTimeout(o._ended.bind(o,d),S):(o._endTimers[d._id]=function(){o._ended(d),h.removeEventListener("ended",o._endTimers[d._id],!1)},h.addEventListener("ended",o._endTimers[d._id],!1))}catch(T){o._emit("playerror",d._id,T)}};h.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(h.src=o._src,h.load());var M=window&&window.ejecta||!h.readyState&&n._navigator.isCocoonJS;if(h.readyState>=3||M)L();else{o._playLock=!0,o._state="loading";var C=function(){o._state="loaded",L(),h.removeEventListener(n._canPlayEvent,C,!1)};h.addEventListener(n._canPlayEvent,C,!1),o._clearTimer(d._id)}}return d._id},pause:function(e){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var o=t._getSoundIds(e),r=0;r<o.length;r++){t._clearTimer(o[r]);var l=t._soundById(o[r]);if(l&&!l._paused&&(l._seek=t.seek(o[r]),l._rateSeek=0,l._paused=!0,t._stopFade(o[r]),l._node))if(t._webAudio){if(!l._node.bufferSource)continue;typeof l._node.bufferSource.stop>"u"?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0),t._cleanBuffer(l._node)}else(!isNaN(l._node.duration)||l._node.duration===1/0)&&l._node.pause();arguments[1]||t._emit("pause",l?l._id:null)}return t},stop:function(e,t){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var r=o._getSoundIds(e),l=0;l<r.length;l++){o._clearTimer(r[l]);var u=o._soundById(r[l]);u&&(u._seek=u._start||0,u._rateSeek=0,u._paused=!0,u._ended=!0,o._stopFade(r[l]),u._node&&(o._webAudio?u._node.bufferSource&&(typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),o._cleanBuffer(u._node)):(!isNaN(u._node.duration)||u._node.duration===1/0)&&(u._node.currentTime=u._start||0,u._node.pause(),u._node.duration===1/0&&o._clearSound(u._node))),t||o._emit("stop",u._id))}return o},mute:function(e,t){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(e,t)}}),o;if(typeof t>"u")if(typeof e=="boolean")o._muted=e;else return o._muted;for(var r=o._getSoundIds(t),l=0;l<r.length;l++){var u=o._soundById(r[l]);u&&(u._muted=e,u._interval&&o._stopFade(u._id),o._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,n.ctx.currentTime):u._node&&(u._node.muted=n._muted?!0:e),o._emit("mute",u._id))}return o},volume:function(){var e=this,t=arguments,o,r;if(t.length===0)return e._volume;if(t.length===1||t.length===2&&typeof t[1]>"u"){var l=e._getSoundIds(),u=l.indexOf(t[0]);u>=0?r=parseInt(t[0],10):o=parseFloat(t[0])}else t.length>=2&&(o=parseFloat(t[0]),r=parseInt(t[1],10));var d;if(typeof o<"u"&&o>=0&&o<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;typeof r>"u"&&(e._volume=o),r=e._getSoundIds(r);for(var v=0;v<r.length;v++)d=e._soundById(r[v]),d&&(d._volume=o,t[2]||e._stopFade(r[v]),e._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(o,n.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=o*n.volume()),e._emit("volume",d._id))}else return d=r?e._soundById(r):e._sounds[0],d?d._volume:0;return e},fade:function(e,t,o,r){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"fade",action:function(){l.fade(e,t,o,r)}}),l;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),o=parseFloat(o),l.volume(e,r);for(var u=l._getSoundIds(r),d=0;d<u.length;d++){var v=l._soundById(u[d]);if(v){if(r||l._stopFade(u[d]),l._webAudio&&!v._muted){var w=n.ctx.currentTime,A=w+o/1e3;v._volume=e,v._node.gain.setValueAtTime(e,w),v._node.gain.linearRampToValueAtTime(t,A)}l._startFadeInterval(v,e,t,o,u[d],typeof r>"u")}}return l},_startFadeInterval:function(e,t,o,r,l,u){var d=this,v=t,w=o-t,A=Math.abs(w/.01),S=Math.max(4,A>0?r/A:r),B=Date.now();e._fadeTo=o,e._interval=setInterval(function(){var s=(Date.now()-B)/r;B=Date.now(),v+=w*s,v=Math.round(v*100)/100,w<0?v=Math.max(o,v):v=Math.min(o,v),d._webAudio?e._volume=v:d.volume(v,e._id,!0),u&&(d._volume=v),(o<t&&v<=o||o>t&&v>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,d.volume(o,e._id),d._emit("fade",e._id))},S)},_stopFade:function(e){var t=this,o=t._soundById(e);return o&&o._interval&&(t._webAudio&&o._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(o._interval),o._interval=null,t.volume(o._fadeTo,e),o._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e=this,t=arguments,o,r,l;if(t.length===0)return e._loop;if(t.length===1)if(typeof t[0]=="boolean")o=t[0],e._loop=o;else return l=e._soundById(parseInt(t[0],10)),l?l._loop:!1;else t.length===2&&(o=t[0],r=parseInt(t[1],10));for(var u=e._getSoundIds(r),d=0;d<u.length;d++)l=e._soundById(u[d]),l&&(l._loop=o,e._webAudio&&l._node&&l._node.bufferSource&&(l._node.bufferSource.loop=o,o&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop,e.playing(u[d])&&(e.pause(u[d],!0),e.play(u[d],!0)))));return e},rate:function(){var e=this,t=arguments,o,r;if(t.length===0)r=e._sounds[0]._id;else if(t.length===1){var l=e._getSoundIds(),u=l.indexOf(t[0]);u>=0?r=parseInt(t[0],10):o=parseFloat(t[0])}else t.length===2&&(o=parseFloat(t[0]),r=parseInt(t[1],10));var d;if(typeof o=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;typeof r>"u"&&(e._rate=o),r=e._getSoundIds(r);for(var v=0;v<r.length;v++)if(d=e._soundById(r[v]),d){e.playing(r[v])&&(d._rateSeek=e.seek(r[v]),d._playStart=e._webAudio?n.ctx.currentTime:d._playStart),d._rate=o,e._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.setValueAtTime(o,n.ctx.currentTime):d._node&&(d._node.playbackRate=o);var w=e.seek(r[v]),A=(e._sprite[d._sprite][0]+e._sprite[d._sprite][1])/1e3-w,S=A*1e3/Math.abs(d._rate);(e._endTimers[r[v]]||!d._paused)&&(e._clearTimer(r[v]),e._endTimers[r[v]]=setTimeout(e._ended.bind(e,d),S)),e._emit("rate",d._id)}}else return d=e._soundById(r),d?d._rate:e._rate;return e},seek:function(){var e=this,t=arguments,o,r;if(t.length===0)e._sounds.length&&(r=e._sounds[0]._id);else if(t.length===1){var l=e._getSoundIds(),u=l.indexOf(t[0]);u>=0?r=parseInt(t[0],10):e._sounds.length&&(r=e._sounds[0]._id,o=parseFloat(t[0]))}else t.length===2&&(o=parseFloat(t[0]),r=parseInt(t[1],10));if(typeof r>"u")return 0;if(typeof o=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var d=e._soundById(r);if(d)if(typeof o=="number"&&o>=0){var v=e.playing(r);v&&e.pause(r,!0),d._seek=o,d._ended=!1,e._clearTimer(r),!e._webAudio&&d._node&&!isNaN(d._node.duration)&&(d._node.currentTime=o);var w=function(){v&&e.play(r,!0),e._emit("seek",r)};if(v&&!e._webAudio){var A=function(){e._playLock?setTimeout(A,0):w()};setTimeout(A,0)}else w()}else if(e._webAudio){var S=e.playing(r)?n.ctx.currentTime-d._playStart:0,B=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(B+S*Math.abs(d._rate))}else return d._node.currentTime;return e},playing:function(e){var t=this;if(typeof e=="number"){var o=t._soundById(e);return o?!o._paused:!1}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,o=t._duration,r=t._soundById(e);return r&&(o=t._sprite[r._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,o=0;o<t.length;o++)t[o]._paused||e.stop(t[o]._id),e._webAudio||(e._clearSound(t[o]._node),t[o]._node.removeEventListener("error",t[o]._errorFn,!1),t[o]._node.removeEventListener(n._canPlayEvent,t[o]._loadFn,!1),t[o]._node.removeEventListener("ended",t[o]._endFn,!1),n._releaseHtml5Audio(t[o]._node)),delete t[o]._node,e._clearTimer(t[o]._id);var r=n._howls.indexOf(e);r>=0&&n._howls.splice(r,1);var l=!0;for(o=0;o<n._howls.length;o++)if(n._howls[o]._src===e._src||e._src.indexOf(n._howls[o]._src)>=0){l=!1;break}return p&&l&&delete p[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,o,r){var l=this,u=l["_on"+e];return typeof t=="function"&&u.push(r?{id:o,fn:t,once:r}:{id:o,fn:t}),l},off:function(e,t,o){var r=this,l=r["_on"+e],u=0;if(typeof t=="number"&&(o=t,t=null),t||o)for(u=0;u<l.length;u++){var d=o===l[u].id;if(t===l[u].fn&&d||!t&&d){l.splice(u,1);break}}else if(e)r["_on"+e]=[];else{var v=Object.keys(r);for(u=0;u<v.length;u++)v[u].indexOf("_on")===0&&Array.isArray(r[v[u]])&&(r[v[u]]=[])}return r},once:function(e,t,o){var r=this;return r.on(e,t,o,1),r},_emit:function(e,t,o){for(var r=this,l=r["_on"+e],u=l.length-1;u>=0;u--)(!l[u].id||l[u].id===t||e==="load")&&(setTimeout(function(d){d.call(this,t,o)}.bind(r,l[u].fn),0),l[u].once&&r.off(e,l[u].fn,l[u].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var o=t._queue[0];o.event===e&&(t._queue.shift(),t._loadQueue()),e||o.action()}return t},_ended:function(e){var t=this,o=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!!(e._loop||t._sprite[o][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var l=(e._stop-e._start)*1e3/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),l)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),!t._webAudio&&!r&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if(typeof t._endTimers[e]!="function")clearTimeout(t._endTimers[e]);else{var o=t._soundById(e);o&&o._node&&o._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,o=0;o<t._sounds.length;o++)if(e===t._sounds[o]._id)return t._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,o=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&o++;for(r=e._sounds.length-1;r>=0;r--){if(o<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),o--)}}},_getSoundIds:function(e){var t=this;if(typeof e>"u"){for(var o=[],r=0;r<t._sounds.length;r++)o.push(t._sounds[r]._id);return o}else return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=p[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),t},_cleanBuffer:function(e){var t=this,o=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return t;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),o))try{e.bufferSource.buffer=n._scratchBuffer}catch{}return e.bufferSource=null,t},_clearSound:function(e){var t=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);t||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,o=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(o,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=t._preload===!0?"auto":t._preload,e._node.volume=o*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(e._node.duration*10)/10,Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(e._node.duration*10)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=t._duration*1e3),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var p={},f=function(e){var t=e._src;if(p[t]){e._duration=p[t].duration,y(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var o=atob(t.split(",")[1]),r=new Uint8Array(o.length),l=0;l<o.length;++l)r[l]=o.charCodeAt(l);g(r.buffer,e)}else{var u=new XMLHttpRequest;u.open(e._xhr.method,t,!0),u.withCredentials=e._xhr.withCredentials,u.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(d){u.setRequestHeader(d,e._xhr.headers[d])}),u.onload=function(){var d=(u.status+"")[0];if(d!=="0"&&d!=="2"&&d!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".");return}g(u.response,e)},u.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete p[t],e.load())},b(u)}},b=function(e){try{e.send()}catch{e.onerror()}},g=function(e,t){var o=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(l){l&&t._sounds.length>0?(p[t._src]=l,y(t,l)):o()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(e).then(r).catch(o):n.ctx.decodeAudioData(e,r,o)},y=function(e,t){t&&!e._duration&&(e._duration=t.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},x=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=t?parseInt(t[1],10):null;if(e&&o&&o<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!r&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:n,Howl:i}}),typeof oe<"u"&&(oe.Howler=n,oe.Howl=i),typeof global<"u"?(global.HowlerGlobal=_,global.Howler=n,global.Howl=i,global.Sound=a):typeof window<"u"&&(window.HowlerGlobal=_,window.Howler=n,window.Howl=i,window.Sound=a)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var a=i._howls.length-1;a>=0;a--)i._howls[a].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,a){var p=this;if(!p.ctx||!p.ctx.listener)return p;if(i=typeof i!="number"?p._pos[1]:i,a=typeof a!="number"?p._pos[2]:a,typeof n=="number")p._pos=[n,i,a],typeof p.ctx.listener.positionX<"u"?(p.ctx.listener.positionX.setTargetAtTime(p._pos[0],Howler.ctx.currentTime,.1),p.ctx.listener.positionY.setTargetAtTime(p._pos[1],Howler.ctx.currentTime,.1),p.ctx.listener.positionZ.setTargetAtTime(p._pos[2],Howler.ctx.currentTime,.1)):p.ctx.listener.setPosition(p._pos[0],p._pos[1],p._pos[2]);else return p._pos;return p},HowlerGlobal.prototype.orientation=function(n,i,a,p,f,b){var g=this;if(!g.ctx||!g.ctx.listener)return g;var y=g._orientation;if(i=typeof i!="number"?y[1]:i,a=typeof a!="number"?y[2]:a,p=typeof p!="number"?y[3]:p,f=typeof f!="number"?y[4]:f,b=typeof b!="number"?y[5]:b,typeof n=="number")g._orientation=[n,i,a,p,f,b],typeof g.ctx.listener.forwardX<"u"?(g.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),g.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),g.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),g.ctx.listener.upX.setTargetAtTime(p,Howler.ctx.currentTime,.1),g.ctx.listener.upY.setTargetAtTime(f,Howler.ctx.currentTime,.1),g.ctx.listener.upZ.setTargetAtTime(b,Howler.ctx.currentTime,.1)):g.ctx.listener.setOrientation(n,i,a,p,f,b);else return y;return g},Howl.prototype.init=function(n){return function(i){var a=this;return a._orientation=i.orientation||[1,0,0],a._stereo=i.stereo||null,a._pos=i.pos||null,a._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},a._onstereo=i.onstereo?[{fn:i.onstereo}]:[],a._onpos=i.onpos?[{fn:i.onpos}]:[],a._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(n,i)}}),a;var p=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")a._stereo=n,a._pos=[n,0,0];else return a._stereo;for(var f=a._getSoundIds(i),b=0;b<f.length;b++){var g=a._soundById(f[b]);if(g)if(typeof n=="number")g._stereo=n,g._pos=[n,0,0],g._node&&(g._pannerAttr.panningModel="equalpower",(!g._panner||!g._panner.pan)&&_(g,p),p==="spatial"?typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):g._panner.setPosition(n,0,0):g._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),a._emit("stereo",g._id);else return g._stereo}return a},Howl.prototype.pos=function(n,i,a,p){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"pos",action:function(){f.pos(n,i,a,p)}}),f;if(i=typeof i!="number"?0:i,a=typeof a!="number"?-.5:a,typeof p>"u")if(typeof n=="number")f._pos=[n,i,a];else return f._pos;for(var b=f._getSoundIds(p),g=0;g<b.length;g++){var y=f._soundById(b[g]);if(y)if(typeof n=="number")y._pos=[n,i,a],y._node&&((!y._panner||y._panner.pan)&&_(y,"spatial"),typeof y._panner.positionX<"u"?(y._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),y._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),y._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):y._panner.setPosition(n,i,a)),f._emit("pos",y._id);else return y._pos}return f},Howl.prototype.orientation=function(n,i,a,p){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"orientation",action:function(){f.orientation(n,i,a,p)}}),f;if(i=typeof i!="number"?f._orientation[1]:i,a=typeof a!="number"?f._orientation[2]:a,typeof p>"u")if(typeof n=="number")f._orientation=[n,i,a];else return f._orientation;for(var b=f._getSoundIds(p),g=0;g<b.length;g++){var y=f._soundById(b[g]);if(y)if(typeof n=="number")y._orientation=[n,i,a],y._node&&(y._panner||(y._pos||(y._pos=f._pos||[0,0,-.5]),_(y,"spatial")),typeof y._panner.orientationX<"u"?(y._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),y._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),y._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):y._panner.setOrientation(n,i,a)),f._emit("orientation",y._id);else return y._orientation}return f},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,a,p,f;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")a=i[0],typeof p>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),n._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:n._panningModel});else return f=n._soundById(parseInt(i[0],10)),f?f._pannerAttr:n._pannerAttr;else i.length===2&&(a=i[0],p=parseInt(i[1],10));for(var b=n._getSoundIds(p),g=0;g<b.length;g++)if(f=n._soundById(b[g]),f){var y=f._pannerAttr;y={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:y.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:y.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:y.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:y.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:y.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:y.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:y.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:y.panningModel};var x=f._panner;x||(f._pos||(f._pos=n._pos||[0,0,-.5]),_(f,"spatial"),x=f._panner),x.coneInnerAngle=y.coneInnerAngle,x.coneOuterAngle=y.coneOuterAngle,x.coneOuterGain=y.coneOuterGain,x.distanceModel=y.distanceModel,x.maxDistance=y.maxDistance,x.refDistance=y.refDistance,x.rolloffFactor=y.rolloffFactor,x.panningModel=y.panningModel}return n},Sound.prototype.init=function(n){return function(){var i=this,a=i._parent;i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,n.call(this),i._stereo?a.stereo(i._stereo):i._pos&&a.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,a=i._parent;return i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,i._stereo?a.stereo(i._stereo):i._pos?a.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,a._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var _=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()});var G=(()=>{let _=null,n=null,i=0,a=0,p=!0,f=()=>{i+=1},b=()=>`(${a}/${i}) [${parseInt(a/i*100).toFixed(0)}%]`;return{init:()=>{_=document.getElementById("progress-info"),n=document.getElementById("progress-bar"),_.style.display="block"},add:f,invalid:e=>{p=!1,n.style.backgroundColor="red",_.innerText=`Error loading ${e} ${b()}`},complete:e=>{p&&(a+=1,_.innerText=`Loading ${e} complete ${b()}`,n.style.width=Math.min(a/i*100,100).toString()+"%",a===i&&document.dispatchEvent(new Event("progress.done")))}}})();var E=(()=>{let _='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',n=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),i=(t,o,r=.05)=>new Promise(l=>{let u=parseFloat(t.style.opacity),d=o?1:0,v=()=>{u+=o?r:-r,u=Math.max(0,Math.min(1,u)),t.style.opacity=u.toFixed(2),o&&u>=d||!o&&u<=d?(t.style.opacity=d.toString(),l(t)):requestAnimationFrame(v)};requestAnimationFrame(v)}),a=(t,o)=>{let r=null;r=setTimeout(()=>{t(),clearTimeout(r),r=null},o)};return{loader:_,copy:async(t,o=null,r=1500)=>{let l=t.getAttribute("data-copy");if(!l||l.length===0){alert("Nothing to copy");return}t.disabled=!0;try{await navigator.clipboard.writeText(l)}catch{t.disabled=!1,alert("Failed to copy");return}let u=t.innerHTML;t.innerHTML=o||'<i class="fa-solid fa-check"></i>',a(()=>{t.disabled=!1,t.innerHTML=u},r)},timeOut:a,debounce:(t,o)=>{let r=null;return(...l)=>{clearTimeout(r),r=setTimeout(()=>t(...l),o)}},escapeHtml:n,base64Encode:t=>{let r=new TextEncoder().encode(t);return window.btoa(String.fromCharCode(...r))},base64Decode:t=>{let o=new TextDecoder,r=Uint8Array.from(window.atob(t),l=>l.charCodeAt(0));return o.decode(r)},disableButton:(t,o="Loading",r=!1)=>{t.disabled=!0;let l=t.innerHTML;return t.innerHTML=r?o:_+o,{restore:(u=!1)=>{t.innerHTML=l,t.disabled=u}}},disableCheckbox:t=>{t.disabled=!0;let o=document.querySelector(`label[for="${t.id}"]`),r=o.innerHTML;return o.innerHTML=_+r,{restore:()=>{o.innerHTML=r,t.disabled=!1}}},parseUserAgent:t=>{let o=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],r=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i}],l=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i}],u=o.find(S=>S.regex.test(t))?.type||"Unknown",d=r.find(S=>S.regex.test(t))?.name||"Unknown",v=l.find(S=>S.regex.test(t)),w=v&&t.match(v.regex)?.[1]?.replace(/_/g,".")||"",A=v?v.name:"Unknown";return w=w?`${A} ${w}`:A,`${d} ${u} ${w}`},changeOpacity:i}})();var V=(()=>{let _=(r,l,u)=>({code:r,data:l,error:u}),n=(r=0)=>({love:r}),i=({uuid:r,own:l,name:u,presence:d,comment:v,created_at:w,is_admin:A,gif_url:S,ip:B,user_agent:s,comments:m,like:h})=>({uuid:r,own:l,name:u,presence:d,comment:v,created_at:w,is_admin:A??!1,gif_url:S,ip:B,user_agent:s,comments:m?.map(i)??[],like:n(h?.love??0)}),a=r=>r.map(i);return{uuidResponse:({uuid:r})=>({uuid:r}),baseResponse:_,tokenResponse:({token:r})=>({token:r}),statusResponse:({status:r})=>({status:r}),commentResponse:({name:r,presence:l,comment:u,is_admin:d,gif_url:v,created_at:w})=>({name:r,presence:l,comment:u,is_admin:d,gif_url:v,created_at:w}),likeCommentResponse:n,getCommentResponse:i,getCommentsResponse:a,getCommentsResponseV2:r=>({count:r.count,lists:a(r.lists)}),commentShowMore:(r,l=!1)=>({uuid:r,show:l}),postCommentRequest:(r,l,u,d,v)=>({id:r,name:l,presence:u,comment:d,gif_id:v}),postSessionRequest:(r,l)=>({email:r,password:l}),updateCommentRequest:(r,l,u)=>({presence:r,comment:l,gif_id:u})}})();var j="GET",de="PUT",K="POST",ce="PATCH",ue="DELETE",Q=200,ne=201,Ie=500,J={Accept:"application/json","Content-Type":"application/json"},N=(_,n)=>{let i=new AbortController,a=document.body.getAttribute("data-url"),p={signal:i.signal,method:String(_).toUpperCase(),headers:new Headers(J)};return window.addEventListener("offline",()=>i.abort()),window.addEventListener("popstate",()=>i.abort()),a&&a.slice(-1)==="/"&&(a=a.slice(0,-1)),{send(f=null){return fetch(a+n,p).then(b=>b.json().then(g=>{if(b.status>=Ie&&(g.message??g[0]))throw new Error(g.message??g[0]);if(g.error)throw new Error(g.error[0]);return f&&(g.data=f(g.data)),V.baseResponse(g.code,g.data,g.error)})).catch(b=>{if(b.name==="AbortError")return console.warn("Fetch abort:",b),b;throw alert(b),new Error(b)})},withCancel(f){return(async()=>(await f,i.abort()))(),this},default(f=null){return p.headers=new Headers(f??{}),fetch(n,p)},download(){return Object.keys(J).forEach(f=>p.headers.delete(f)),fetch(a+n,p).then(f=>{if(f.status!==Q)return!1;let b=document.querySelector("a[download]");b&&document.body.removeChild(b);let g=f.headers.get("content-disposition")?.match(/filename="(.+)"/)?.[1]??"download.csv";return f.blob().then(y=>{let x=document.createElement("a"),e=window.URL.createObjectURL(y);return x.href=e,x.download=g,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(e),!0})}).catch(f=>{if(f.name==="AbortError")return console.warn("Fetch abort:",f),f;throw alert(f),new Error(f)})},token(f){return f.split(".").length===3?(p.headers.append("Authorization","Bearer "+f),this):(p.headers.append("x-access-key",f),this)},body(f){return p.body=JSON.stringify(f),this}}};var ie=(()=>{let _=null,n=null,i=!1,a=1e3*60*60*6,p="images",f=async t=>{let o=t.getAttribute("data-src"),r="x-expiration-time",l="image/webp",u=new Image;if(u.onload=()=>{t.src=u.src,t.width=u.width,t.height=u.height,u.remove(),G.complete("image")},_.has(o)){u.src=_.get(o);return}let d=A=>new Promise((S,B)=>{let s=document.createElement("canvas");s.width=A.width,s.height=A.height,s.getContext("2d").drawImage(A,0,0);let m=h=>{h?S(h):B(new Error("Failed to convert image to WebP")),s.remove()};s.onerror=B,s.toBlob(m,l,.8)}),v=(A,S=3,B=1e3)=>N(j,o).default().then(s=>s.blob()).then(s=>window.createImageBitmap(s)).then(s=>d(s)).then(s=>{let m=new Headers;return m.set("Content-Type",l),m.set("Content-Length",String(s.size)),m.set(r,String(Date.now()+a)),A.put(o,new Response(s,{headers:m})).then(()=>s)}).catch(s=>{if(S<=0)throw s;return console.warn("Retrying fetch:"+o),new Promise((m,h)=>E.timeOut(()=>v(A,S-1,B+1e3).then(m,h),B))}),w=A=>A.match(o).then(S=>S?Date.now()<=parseInt(S.headers.get(r))?S.blob():A.delete(o).then(B=>B?v(A):S.blob()):v(A));await caches.open(p).then(A=>w(A)).then(A=>{u.src=URL.createObjectURL(A),_.set(o,u.src)}).catch(A=>{throw G.invalid("image"),A})},b=t=>{t.onerror=()=>G.invalid("image"),t.onload=()=>{t.width=t.naturalWidth,t.height=t.naturalHeight,G.complete("image")},t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0?G.complete("image"):t.complete&&G.invalid("image")},g=()=>i,y=t=>{a=Number(t)},x=()=>{(async()=>{for(let t of n)if(t.hasAttribute("data-src"))try{await f(t)}catch{break}else b(t)})()};return{init:()=>(_=new Map,n=document.querySelectorAll("img"),n.forEach(G.add),i=Array.from(n).some(t=>t.hasAttribute("data-src")),{load:x,setTtl:y,hasDataSrc:g})}})();var me=Le(fe()),re=(()=>{let _=null,n=null,i=null,a=null,p=!1,f=1e3*60*60*6,b="audio_v1.0",g="audio/mpeg",y="x-expiration-time",x='<i class="fa-solid fa-circle-pause spin-button"></i>',e='<i class="fa-solid fa-circle-play"></i>',t=async()=>{if(navigator.onLine){_.disabled=!0;try{n.mute(!1),n.play(),p=!0,_.disabled=!1,_.innerHTML=x}catch(w){p=!1,alert(w)}}},o=()=>{p=!1,n.pause(),_.innerHTML=e},r=(w,A=3,S=1e3)=>N(j,i).default().then(B=>B.blob()).then(B=>{let s=new Headers;return s.set("Content-Type",g),s.set("Content-Length",String(B.size)),s.set(y,String(Date.now()+f)),w.put(i,new Response(B,{headers:s})).then(()=>B)}).catch(B=>{if(A<=0)throw B;return console.warn("Retrying fetch:"+i),new Promise(s=>E.timeOut(()=>s(r(w,A-1,S+1e3)),S))}),l=()=>{caches.keys().then(w=>{w.forEach(A=>{A.includes("image")?console.log("Cache gambar dipertahankan:",A):A!==b&&caches.delete(A).then(()=>{console.log("Cache lama telah dihapus:",A)})})})},u=()=>(l(),caches.open(b).then(w=>w.match(i).then(A=>A?Date.now()<=parseInt(A.headers.get(y))?A.blob():w.delete(i).then(()=>r(w)):r(w))).then(w=>URL.createObjectURL(w)));return{init:async()=>{_=document.getElementById("button-music"),i=_.getAttribute("data-url"),document.addEventListener("undangan.open",()=>{_.style.display="block"});try{let w=await u();n=new me.Howl({src:[w],format:["mp3"],autoplay:!1,loop:!0,volume:1,mute:!0,onplayerror:A=>{console.error("Error playing audio:",A),alert("Error playing audio. Please try again.")},onloaderror:A=>{console.error("Error loading audio:",A),alert("Error loading audio. Please try again.")}}),G.complete("audio")}catch(w){G.invalid("audio"),console.error("Error initializing audio:",w)}_.addEventListener("offline",o),_.addEventListener("click",()=>p?o():t())},play:t,setTtl:w=>{f=Number(w),console.log("TTL set to:",f)}}})();var pe={tab:i=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(i)),modal:i=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(i))};var P=_=>{let n=(b=null)=>{let g=JSON.parse(localStorage.getItem(_));return b?g[String(b)]:g},i=(b,g)=>{let y=n();y[String(b)]=g,localStorage.setItem(_,JSON.stringify(y))},a=b=>Object.keys(n()).includes(String(b)),p=b=>{if(!a(b))return;let g=n();delete g[String(b)],localStorage.setItem(_,JSON.stringify(g))},f=()=>localStorage.setItem(_,"{}");return localStorage.getItem(_)||f(),{set:i,get:n,has:a,clear:f,unset:p}};var te=(()=>{let _={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},n=["#ffffff","#f8f9fa"],i=["#000000","#212529"],a=!1,p=null,f=null,b=()=>p.set("active","light"),g=()=>p.set("active","dark"),y=d=>{let v=f.getAttribute("content");f.setAttribute("content",d.some(w=>w===v)?_[v]:v)},x=()=>{b(),document.documentElement.setAttribute("data-bs-theme","light"),y(i)},e=()=>{g(),document.documentElement.setAttribute("data-bs-theme","dark"),y(n)},t=(d=null,v=null)=>{let w=p.get("active")==="dark";return d&&v?w?d:v:w};return{init:()=>{switch(p=P("theme"),f=document.querySelector('meta[name="theme-color"]'),p.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?g():b()),document.documentElement.getAttribute("data-bs-theme")){case"dark":g();break;case"light":b();break;default:a=!0}t()?e():x()},spyTop:()=>{let d=w=>w.filter(A=>A.isIntersecting).forEach(A=>{let S=A.target.classList.contains("bg-white-black")?t(i[0],n[0]):t(i[1],n[1]);f.setAttribute("content",S)}),v=new IntersectionObserver(d,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(w=>v.observe(w))},change:()=>t()?x():e(),isDarkMode:t,isAutoMode:()=>a}})();var Z=(()=>{let _={id:"ID",en:"US",fr:"FR",de:"DE",es:"ES",zh:"CN",ja:"JP",ko:"KR",ar:"SA",ru:"RU",it:"IT",nl:"NL",pt:"PT",tr:"TR",th:"TH",vi:"VN",ms:"MY",hi:"IN"},n=null,i=null,a=null,p=null;return{on(f,b){return p.set(f,b),this},get(){let f=p.get(a);return p.clear(),f},getCountry(){return n},getLocale(){return i},getLanguage(){return a},setDefault(f){let b=!0;_[f]||(b=!1,console.warn("Language not found, please add manually in countryMapping")),n=b?_[f]:"US",a=b?f:"en",i=`${a}_${n}`},init(){p=new Map,this.setDefault(navigator.language)}}})();var D=(()=>{let _=null,n=()=>_.get("token"),i=x=>_.set("token",x),a=x=>N(K,"/api/session").body(x).send(V.tokenResponse).then(e=>(e.code===Q&&i(e.data.token),e.code===Q),()=>!1),p=()=>_.unset("token"),f=()=>String(n()??".").split(".").length===3;return{init:()=>{_=P("session")},guest:()=>N(j,"/api/config").token(n()).send().then(x=>{if(x.code!==Q)throw new Error("failed to get config.");let e=P("config");for(let[t,o]of Object.entries(x.data))e.set(t,o);return x}),login:a,logout:p,decode:()=>{if(!f())return null;try{return JSON.parse(window.atob(n().split(".")[1]))}catch{return null}},isAdmin:f,setToken:i,getToken:n}})();var _e=(()=>{let _=null,n=!0,i=["input[data-offline-disabled]","button[data-offline-disabled]","select[data-offline-disabled]","textarea[data-offline-disabled]"],a=()=>n,p=()=>{let t=_.firstElementChild.firstElementChild;t.classList.remove("bg-success"),t.classList.add("bg-danger"),t.firstElementChild.innerHTML='<i class="fa-solid fa-ban me-2"></i>Koneksi tidak tersedia'},f=()=>{let t=_.firstElementChild.firstElementChild;t.classList.remove("bg-danger"),t.classList.add("bg-success"),t.firstElementChild.innerHTML='<i class="fa-solid fa-cloud me-2"></i>Koneksi tersedia kembali'},b=async()=>{n&&(await E.changeOpacity(_,!1),p())},g=()=>{document.querySelectorAll(i.join(", ")).forEach(t=>{t.dispatchEvent(new Event(a()?"online":"offline")),t.setAttribute("data-offline-disabled",a()?"false":"true"),t.tagName==="BUTTON"?a()?t.classList.remove("disabled"):t.classList.add("disabled"):a()?t.removeAttribute("disabled"):t.setAttribute("disabled","true")})},y=()=>{n=!1,p(),E.changeOpacity(_,!0),g()},x=()=>{n=!0,f(),E.timeOut(b,3e3),g()};return{init:()=>{window.addEventListener("online",x),window.addEventListener("offline",y),_=document.getElementById("offline-mode"),_.innerHTML=`
        <div class="d-flex justify-content-center mx-auto">
            <div class="d-flex justify-content-center align-items-center rounded-pill my-2 bg-danger shadow">
                <small class="text-center py-1 px-2 mx-1 mt-1 mb-0 text-white" style="font-size: 0.8rem;"></small>
            </div>
        </div>`},isOnline:a}})();var F=(()=>{let _="gifs",n="default",i={128:2,256:3,512:4,768:5},a=null,p=null,f=null,b=null,g=async c=>{if(a.has(c))return a.get(c);let T=(O,H=3,I=1e3)=>N(j,c).default().then(q=>q.blob().then(U=>O.put(c,new Response(U,{headers:new Headers(q.headers)})).then(()=>U))).catch(q=>{if(H<=0)throw q;return console.warn("Retrying fetch:"+c),new Promise((U,Y)=>E.timeOut(()=>T(O,H-1,I+1e3).then(U,Y),I))}),$=O=>O.match(c).then(H=>{if(!H)return T(O);let I=H.headers.get("expires"),q=I?new Date(I).getTime():0;return Date.now()>q?O.delete(c).then(U=>U?T(O):H.blob()):H.blob()});return await caches.open(_).then(O=>$(O)).then(O=>URL.createObjectURL(O)).then(O=>(a.set(c,O),O))},y=async(c,T)=>{let{id:$,media_formats:{tinygif:{url:R}},content_description:O}=T;c.pointer===-1||c.pointer===c.col-1?c.pointer=0:c.pointer++;let H=0;for(let I of c.lists.childNodes){if(H===c.pointer){await g(R).then(q=>{I.insertAdjacentHTML("beforeend",`
                    <figure class="gif-figure m-0 position-relative">
                        <button onclick="undangan.comment.gif.click('${c.uuid}', '${$}', '${E.base64Encode(R)}')" class="btn gif-checklist position-absolute justify-content-center align-items-center top-0 end-0 bg-overlay-auto p-1 m-1 rounded-circle border shadow-sm z-1">
                            <i class="fa-solid fa-circle-check"></i>
                        </button>
                        <img src="${q}" class="img-fluid" alt="${E.escapeHtml(O)}" style="width: 100%;">
                    </figure>`)});return}H++}},x=c=>{let T=c.lists,$=document.getElementById(`gif-loading-${c.uuid}`),R=document.getElementById(`progress-bar-${c.uuid}`),O=document.getElementById(`progress-info-${c.uuid}`),H=0,I=0;return T.classList.contains("d-none")||$.classList.replace("d-none","d-flex"),O.innerText=`${I}/${H}`,T.setAttribute("data-continue","false"),T.classList.replace("overflow-y-scroll","overflow-y-hidden"),{release:()=>{T.classList.contains("d-none")||$.classList.replace("d-flex","d-none"),R.style.width="0%",O.innerText=`${I}/${H}`,T.setAttribute("data-continue","true"),T.classList.replace("overflow-y-hidden","overflow-y-scroll")},until:z=>{H=z,O.innerText=`${I}/${H}`},step:()=>{I+=1,O.innerText=`${I}/${H}`,R.style.width=Math.min(I/H*100,100).toString()+"%"}}},e=(c,T,$)=>{$={media_filter:"tinygif",client_key:"undangan_app",key:b.get("tenor_key"),country:Z.getCountry(),locale:Z.getLocale(),...$??{}};let R=Object.keys($).filter(I=>$[I]!==null&&$[I]!==void 0).map(I=>`${I}=${encodeURIComponent($[I])}`).join("&"),O=`https://tenor.googleapis.com/v2${T}?${R}`,H=new Promise(I=>{c.reqs.push(I)});c.last=new Promise(I=>{let q=!0;(async()=>(await H,q=!1))(),(async()=>{let U=x(c);try{let Y=await N(j,O).withCancel(H).default(J).then(z=>z.json()).then(z=>{if(!z.error)return z;throw new Error(z.error.message)});if(Y.results.length>0){c.next=Y?.next,U.until(Y.results.length);for(let z of Y.results)try{q&&(c.gifs.push(z),await y(c,z),U.step())}catch(ve){throw q=!1,ve}}}catch(Y){q=!1,Y.name==="AbortError"?console.warn("Fetch abort:",Y):alert(Y)}finally{U.release(),I()}})()})},t=c=>`
        <label for="gif-search-${c}" class="form-label my-1"><i class="fa-solid fa-photo-film me-2"></i>Gif</label>

        <div class="d-flex mb-3" id="gif-search-nav-${c}">
            <button class="btn btn-secondary btn-sm rounded-4 shadow-sm me-1 my-1" onclick="undangan.comment.gif.back(this, '${c}')" data-offline-disabled="false"><i class="fa-solid fa-arrow-left"></i></button>
            <input type="text" name="gif-search" id="gif-search-${c}" autocomplete="on" class="form-control shadow-sm rounded-4" placeholder="Search for a GIF on Tenor" data-offline-disabled="false">
        </div>

        <div class="position-relative">
            <div class="position-absolute d-flex flex-column justify-content-center align-items-center top-50 start-50 translate-middle w-100 h-100 bg-overlay-auto rounded-4 z-3" id="gif-loading-${c}">
                <div class="progress w-25" role="progressbar" style="height: 0.5rem;" aria-label="progress bar">
                    <div class="progress-bar" id="progress-bar-${c}" style="width: 0%"></div>
                </div>
                <small class="mt-1 text-theme-auto bg-theme-auto py-0 px-2 rounded-4" id="progress-info-${c}" style="font-size: 0.7rem;"></small>
            </div>
            <div id="gif-lists-${c}" class="d-flex rounded-4 p-0 overflow-y-scroll border" data-continue="true" style="height: 15rem;"></div>
        </div>

        <figure class="d-flex m-0 position-relative" id="gif-result-${c}">
            <button onclick="undangan.comment.gif.cancel('${c}')" id="gif-cancel-${c}" class="btn d-none position-absolute justify-content-center align-items-center top-0 end-0 bg-overlay-auto p-2 m-1 rounded-circle border shadow-sm z-1">
                <i class="fa-solid fa-circle-xmark"></i>
            </button>
        </figure>`,o=async c=>{c.reqs.forEach(T=>T()),c.reqs=[],c.last&&(await c.last,c.last=null)},r=async c=>{await o(c);let T=0;for(let[R,O]of Object.entries(i))T=O,c.lists.clientWidth>=parseInt(R)&&(c.col=T);if(c.col===null&&(c.col=T),c.pointer=-1,c.limit=c.col*5,c.lists.innerHTML='<div class="d-flex flex-column"></div>'.repeat(c.col),c.gifs.length===0)return;let $=x(c);$.until(c.gifs.length);for(let R of c.gifs)try{await y(c,R),$.step()}catch{c.gifs=[];break}$.release(),c.gifs.length===0&&await r(c)},l=async c=>{if(c.lists.getAttribute("data-continue")!=="true"||!c.next||c.next.length===0)return;let T=c.query&&c.query.trim().length>0,$={pos:c.next,limit:c.limit};T&&($.q=c.query),c.lists.scrollTop>(c.lists.scrollHeight-c.lists.clientHeight)*.9&&(await o(c),e(c,T?"/search":"/featured",$))},u=async(c,T=null)=>{c.query=T!==null?T:c.query,(!c.query||c.query.trim().length===0)&&(c.query=null),c.next=null,c.gifs=[],c.pointer=-1,await r(c),e(c,c.query===null?"/featured":"/search",{q:c.query,limit:c.limit})},d=c=>{if(!p.has(c)){document.getElementById(`gif-form-${c}`).innerHTML=t(c),p.set(c,{uuid:c,last:null,limit:null,query:null,next:null,col:null,pointer:-1,gifs:[],reqs:[],lists:document.getElementById(`gif-lists-${c}`)});let T=p.get(c),$=E.debounce(r,750),R=E.debounce(u,750),O=E.debounce(l,250);window.addEventListener("resize",()=>$(T)),T.lists.addEventListener("scroll",()=>O(T)),document.getElementById(`gif-search-${c}`).addEventListener("input",H=>R(T,H.target.value))}return p.get(c)};return{default:n,init:()=>{a=new Map,f=new Map,p=new Map,b=P("config"),b.get("tenor_key")===null&&document.querySelector('[onclick="undangan.comment.gif.open(undangan.comment.gif.default)"]')?.remove()},cache:g,back:async(c,T)=>{let $=E.disableButton(c,E.loader.replace("me-1","me-0"),!0);await o(p.get(T)),$.restore(),document.getElementById(`gif-form-${T}`).classList.toggle("d-none",!0),document.getElementById(`comment-form-${T}`)?.classList.toggle("d-none",!1)},open:async c=>{let T=d(c);document.getElementById(`gif-form-${c}`).classList.toggle("d-none",!1),document.getElementById(`comment-form-${c}`)?.classList.toggle("d-none",!0),f.has(c)&&f.get(c)(),await u(T)},cancel:c=>{let T=document.getElementById(`gif-result-${c}`);T.removeAttribute("data-id"),T.querySelector(`#gif-cancel-${c}`).classList.replace("d-flex","d-none"),T.querySelector("img").remove(),p.get(c).lists.classList.replace("d-none","d-flex"),document.getElementById(`gif-search-nav-${c}`).classList.replace("d-none","d-flex")},click:(c,T,$)=>{let R=document.getElementById(`gif-result-${c}`);R.setAttribute("data-id",T),R.querySelector(`#gif-cancel-${c}`).classList.replace("d-none","d-flex"),R.insertAdjacentHTML("beforeend",`<img src="${a.get(E.base64Decode($))}" class="img-fluid mx-auto gif-image rounded-4" alt="selected-gif">`),p.get(c).lists.classList.replace("d-flex","d-none"),document.getElementById(`gif-search-nav-${c}`).classList.replace("d-flex","d-none")},remove:async(c=null)=>{c?p.has(c)&&(await o(p.get(c)),p.delete(c),f.delete(c)):(await Promise.all(Array.from(p.keys()).map(T=>o(p.get(T)))),p.clear(),f.clear())},isOpen:c=>{let T=document.getElementById(`gif-form-${c}`);return T===null?!1:!T.classList.contains("d-none")},onOpen:(c,T)=>f.set(c,T),getResultId:c=>document.getElementById(`gif-result-${c}`)?.getAttribute("data-id"),buttonCancel:(c=null)=>{let T=document.getElementById(`gif-cancel-${c||n}`);return{show:()=>T.classList.replace("d-none","d-flex"),hide:()=>T.classList.replace("d-flex","d-none"),click:()=>T.dispatchEvent(new Event("click"))}},removeGifSearch:c=>document.querySelector(`[for="gif-search-${c}"]`)?.remove(),removeButtonBack:c=>document.querySelector(`[onclick="undangan.comment.gif.back(this, '${c}')"]`)?.remove()}})();var X=(()=>{let _=null,n=null,i=null,a=null,p=null,f=null,b=300,g=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],y=()=>`
        <div class="bg-theme-auto shadow p-3 mx-0 mt-0 mb-3 rounded-4">
            <div class="d-flex justify-content-between align-items-center placeholder-wave">
                <span class="placeholder bg-secondary col-5 rounded-3 my-1"></span>
                <span class="placeholder bg-secondary col-3 rounded-3 my-1"></span>
            </div>
            <hr class="my-1">
            <p class="placeholder-wave m-0">
                <span class="placeholder bg-secondary col-6 rounded-3"></span>
                <span class="placeholder bg-secondary col-5 rounded-3"></span>
                <span class="placeholder bg-secondary col-12 rounded-3 my-1"></span>
            </p>
        </div>`,x=s=>(g.forEach(m=>{let h=m[0],k=m[1];s=s.replace(new RegExp(`\\${h}(?=\\S)(.*?)(?<!\\s)\\${h}`,"gs"),k)}),s),e=s=>`
        <button style="font-size: 0.8rem;" onclick="undangan.comment.like.love(this)" data-uuid="${s.uuid}" class="btn btn-sm btn-outline-auto ms-auto rounded-3 p-0 shadow-sm d-flex justify-content-start align-items-center" data-offline-disabled="false">
            <span class="my-0 mx-1" data-count-like="${s.like.love}">${s.like.love}</span>
            <i class="me-1 ${i.has(s.uuid)?"fa-solid fa-heart text-danger":"fa-regular fa-heart"}"></i>
        </button>`,t=s=>{let m=`<div class="d-flex justify-content-start align-items-center" data-button-action="${s.uuid}">`;return(a.get("can_reply")===!0||a.get("can_reply")===void 0)&&(m+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.reply(this)" data-uuid="${s.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Reply</button>`),n.has(s.uuid)&&(a.get("can_edit")===!0||a.get("can_edit")===void 0)&&!(s.gif_url&&a.get("tenor_key")===null)&&(m+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.edit(this)" data-uuid="${s.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Edit</button>`),D.isAdmin()?m+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.remove(this)" data-uuid="${s.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-own="${s.own}" data-offline-disabled="false">Delete</button>`:n.has(s.uuid)&&(a.get("can_delete")===!0||a.get("can_delete")===void 0)&&(m+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.remove(this)" data-uuid="${s.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Delete</button>`),m+="</div>",m},o=(s,m)=>{let h=f.get("show").includes(s);return`<a class="text-theme-auto" style="font-size: 0.8rem;" onclick="undangan.comment.showOrHide(this)" data-uuid="${s}" data-uuids="${m.join(",")}" data-show="${h?"true":"false"}" role="button" class="me-auto ms-1 py-0">${h?"Hide replies":`Show replies (${m.length})`}</a>`},r=s=>`
        <div class="d-flex justify-content-between align-items-center" id="button-${s.uuid}">
            ${t(s)}
            ${s.comments.length>0?o(s.uuid,s.comments.map(m=>m.uuid)):""}
            ${e(s)}
        </div>`,l=s=>s.ip===void 0||s.user_agent===void 0||s.is_admin?"":`
        <div class="mb-1 mt-3">
            <p class="text-theme-auto mb-1 mx-0 mt-0 p-0" style="font-size: 0.7rem;" id="ip-${s.uuid}"><i class="fa-solid fa-location-dot me-1"></i>${E.escapeHtml(s.ip)} ${p.has(s.ip)?`<strong>${p.get(s.ip)}</strong>`:'<span class="mb-1 placeholder col-2 rounded-3"></span>'}</p>
            <p class="text-theme-auto m-0 p-0" style="font-size: 0.7rem;"><i class="fa-solid fa-mobile-screen-button me-1"></i>${E.parseUserAgent(E.escapeHtml(s.user_agent))}</p>
        </div>`,u=(s,m)=>m?'class="bg-theme-auto shadow p-3 mx-0 mt-0 mb-3 rounded-4" data-parent="true"':`class="${f.get("hidden").find(h=>h.uuid===s.uuid).show?"":"d-none"} overflow-x-scroll mw-100 border-start bg-theme-auto py-2 ps-2 pe-0 my-2 ms-2 me-0"`,d=(s,m)=>s.is_admin?`<strong class="me-1">${E.escapeHtml(_.get("name")??a.get("name"))}</strong><i class="fa-solid fa-certificate text-primary"></i>`:m?`<strong class="me-1">${E.escapeHtml(s.name)}</strong><i id="badge-${s.uuid}" data-is-presence="${s.presence?"true":"false"}" class="fa-solid ${s.presence?"fa-circle-check text-success":"fa-circle-xmark text-danger"}"></i>`:`<strong>${E.escapeHtml(s.name)}</strong>`,v=async(s,m)=>{let h=`
        <div class="d-flex justify-content-between align-items-center">
            <p class="text-theme-auto text-truncate m-0 p-0" style="font-size: 0.95rem;">${d(s,m)}</p>
            <small class="text-theme-auto m-0 p-0" style="font-size: 0.75rem;">${s.created_at}</small>
        </div>
        <hr class="my-1">`;if(s.gif_url)return h+`
            <div class="d-flex justify-content-center align-items-center my-2">
                <img src="${await F.cache(s.gif_url)}" id="img-gif-${s.uuid}" class="img-fluid mx-auto gif-image rounded-4" alt="selected-gif">
            </div>`;let k=x(E.escapeHtml(s.comment)),L=k.length>b;return h+`
        <p class="text-theme-auto my-1 mx-0 p-0" style="white-space: pre-wrap !important; font-size: 0.95rem;" ${L?`data-comment="${E.base64Encode(k)}"`:""} id="content-${s.uuid}">${L?k.slice(0,b)+"...":k}</p>
        ${L?`<p class="d-block mb-2 mt-0 mx-0 p-0"><a class="text-theme-auto" role="button" style="font-size: 0.85rem;" data-show="false" onclick="undangan.comment.showMore(this, '${s.uuid}')">Selengkapnya</a></p>`:""}`},w=async(s,m)=>{let h=await v(s,m),k="";for(let L of s.comments)k+=await w(L,!1);return`
        <div ${u(s,m)} id="${s.uuid}" style="overflow-wrap: break-word !important;">
            <div id="body-content-${s.uuid}" data-tapTime="0" data-liked="false" tabindex="0">${h}</div>
            ${l(s)}
            ${r(s)}
            <div id="reply-content-${s.uuid}">${k}</div>
        </div>`};return{init:()=>{_=P("user"),n=P("owns"),i=P("likes"),a=P("config"),p=P("tracker"),f=P("comment")},renderEdit:(s,m,h,k)=>{let L=document.createElement("div");return L.classList.add("my-2"),L.id=`inner-${s}`,L.innerHTML=`
        <p class="my-1 mx-0 p-0" style="font-size: 0.95rem;"><i class="fa-solid fa-pen me-2"></i>Edit</p>
        ${h?`
        <select class="form-select shadow-sm mb-2 rounded-4" id="form-inner-presence-${s}" data-offline-disabled="false">
            <option value="1" ${m?"selected":""}>&#9989; Datang</option>
            <option value="2" ${m?"":"selected"}>&#10060; Berhalangan</option>
        </select>`:""}
        ${k?`${a.get("tenor_key")===null?"":`<div class="d-none mb-2" id="gif-form-${s}"></div>`}`:`<textarea class="form-control shadow-sm rounded-4 mb-2" id="form-inner-${s}" minlength="1" maxlength="1000" placeholder="Type update comment" rows="3" data-offline-disabled="false"></textarea>    
        `}
        <div class="d-flex justify-content-end align-items-center mb-0">
            <button style="font-size: 0.8rem;" onclick="undangan.comment.cancel(this, '${s}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1" data-offline-disabled="false">Cancel</button>
            <button style="font-size: 0.8rem;" onclick="undangan.comment.update(this)" data-uuid="${s}" class="btn btn-sm btn-outline-auto rounded-4 py-0" data-offline-disabled="false">Update</button>
        </div>`,L},renderReply:s=>{let m=document.createElement("div");return m.classList.add("my-2"),m.id=`inner-${s}`,m.innerHTML=`
        <p class="my-1 mx-0 p-0" style="font-size: 0.95rem;"><i class="fa-solid fa-reply me-2"></i>Reply</p>
        <div class="d-block mb-2" id="comment-form-${s}">
            <div class="position-relative">
                ${a.get("tenor_key")===null?"":`<button class="btn btn-secondary btn-sm rounded-4 shadow-sm me-1 my-1 position-absolute bottom-0 end-0" onclick="undangan.comment.gif.open('${s}')" aria-label="button gif" data-offline-disabled="false"><i class="fa-solid fa-photo-film"></i></button>`}
                <textarea class="form-control shadow-sm rounded-4 mb-2" id="form-inner-${s}" minlength="1" maxlength="1000" placeholder="Type reply comment" rows="3" data-offline-disabled="false"></textarea>
            </div>
        </div>
        <div class="d-none mb-2" id="gif-form-${s}"></div>
        <div class="d-flex justify-content-end align-items-center mb-0">
            <button style="font-size: 0.8rem;" onclick="undangan.comment.cancel(this, '${s}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1" data-offline-disabled="false">Cancel</button>
            <button style="font-size: 0.8rem;" onclick="undangan.comment.send(this)" data-uuid="${s}" class="btn btn-sm btn-outline-auto rounded-4 py-0" data-offline-disabled="false">Send</button>
        </div>`,m},renderLoading:y,renderReadMore:o,renderInnerContent:s=>w(s,!1),renderContent:s=>w(s,!0),convertMarkdownToHTML:x,maxCommentLength:b}})();var se=()=>window.confetti.shapeFromPath({path:"M167 72c19,-38 37,-56 75,-56 42,0 76,33 76,75 0,76 -76,151 -151,227 -76,-76 -151,-151 -151,-227 0,-42 33,-75 75,-75 38,0 57,18 76,56z",matrix:[.03333333333333333,0,0,.03333333333333333,-5.566666666666666,-5.533333333333333]}),ge=()=>{window.confetti({origin:{y:1},zIndex:1057,shapes:[se()],colors:["#FFC0CB","#FF1493","#C71585"]})},he=(_=15)=>{let n=_*1e3,i=Date.now()+n,a=se(),p=["#FFC0CB","#FF1493","#C71585"],f=(g,y)=>Math.random()*(y-g)+g,b=()=>{let g=i-Date.now();p.forEach(y=>{window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(g/n)),origin:{x:Math.random(),y:Math.abs(Math.random()-g/n)},zIndex:1057,colors:[y],shapes:[a],drift:f(-.5,.5),gravity:f(.5,1),scalar:f(.5,1)})}),g>0&&requestAnimationFrame(b)};requestAnimationFrame(b)},ye=_=>{if(!window.confetti)return;let n=Date.now()+25,i=Math.max(.3,Math.min(1,_.getBoundingClientRect().top/window.innerHeight+.2)),a=se(),p=["#FF69B4","#FF1493"],f=()=>{p.forEach(b=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[a],origin:{x:0,y:i},zIndex:1057,colors:[b]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[a],origin:{x:1,y:i},zIndex:1057,colors:[b]})}),Date.now()<n&&requestAnimationFrame(f)};requestAnimationFrame(f)};var ee=(()=>{let _=null,n=async f=>{let b=f.firstElementChild,g=f.lastElementChild,y=f.getAttribute("data-uuid"),x=parseInt(b.getAttribute("data-count-like"));f.disabled=!0,navigator.vibrate&&navigator.vibrate(100),_.has(y)?await N(ce,"/api/comment/"+_.get(y)).token(D.getToken()).send(V.statusResponse).then(e=>{e.data.status&&(_.unset(y),g.classList.remove("fa-solid","text-danger"),g.classList.add("fa-regular"),b.setAttribute("data-count-like",String(x-1)))}):await N(K,"/api/comment/"+y).token(D.getToken()).send(V.uuidResponse).then(e=>{e.code===ne&&(_.set(y,e.data.uuid),g.classList.remove("fa-regular"),g.classList.add("fa-solid","text-danger"),b.setAttribute("data-count-like",String(x+1)))}),b.innerText=b.getAttribute("data-count-like"),f.disabled=!1},i=f=>document.querySelector(`button[onclick="undangan.comment.like.love(this)"][data-uuid="${f}"]`);return{init:()=>{_=P("likes")},love:n,tapTap:async f=>{if(!navigator.onLine)return;let b=Date.now(),g=b-parseInt(f.getAttribute("data-tapTime")),y=f.id.replace("body-content-",""),x=g<300&&g>0,e=!_.has(y)&&f.getAttribute("data-liked")!=="true";x&&e&&(ye(f),f.setAttribute("data-liked","true"),await n(i(y)),f.setAttribute("data-liked","false")),f.setAttribute("data-tapTime",b)},getButtonLike:i}})();var W=(()=>{let _=10,n=0,i=0,a=null,p=null,f=null,b=null,g=null,y=S=>{_=Number(S)},x=()=>_,e=()=>n,t=()=>i,o=()=>p.classList.contains("disabled")?null:p.classList.add("disabled"),r=()=>p.classList.contains("disabled")?p.classList.remove("disabled"):null,l=()=>f.classList.contains("disabled")?null:f.classList.add("disabled"),u=()=>f.classList.contains("disabled")?f.classList.remove("disabled"):null,d=S=>{l(),o();let B=E.disableButton(S,E.loader.replace("ms-0 me-1","mx-1"),!0),s=async()=>{let k=new Promise(L=>g.addEventListener("comment.result",L,{once:!0}));g.dispatchEvent(new Event("comment.show")),await k,B.restore(),g.scrollIntoView({behavior:"smooth"})};return{next:()=>{n+=_,S.innerHTML="Next"+S.innerHTML,s()},prev:()=>{n-=_,S.innerHTML=S.innerHTML+"Prev",s()}}};return{init:()=>{b=document.getElementById("pagination"),b.innerHTML=`
        <ul class="pagination mb-2 shadow-sm rounded-4">
            <li class="page-item disabled" id="previous">
                <button class="page-link rounded-start-4" onclick="undangan.comment.pagination.previous(this)" data-offline-disabled="false">
                    <i class="fa-solid fa-circle-left me-1"></i>Prev
                </button>
            </li>
            <li class="page-item disabled">
                <span class="page-link text-theme-auto" id="page"></span>
            </li>
            <li class="page-item" id="next">
                <button class="page-link rounded-end-4" onclick="undangan.comment.pagination.next(this)" data-offline-disabled="false">
                    Next<i class="fa-solid fa-circle-right ms-1"></i>
                </button>
            </li>
        </ul>`,g=document.getElementById("comments"),a=document.getElementById("page"),p=document.getElementById("previous"),f=document.getElementById("next")},setPer:y,getPer:x,getNext:e,reset:()=>n===0?!1:(n=0,l(),o(),!0),setTotal:S=>{if(i=Number(S),i===0||i<=_&&n===0){b.classList.add("d-none");return}let B=n/_+1,s=Math.ceil(i/_);if(a.innerText=`${B} / ${s}`,n>0&&r(),B>=s){l();return}u(),b.classList.contains("d-none")&&b.classList.remove("d-none")},geTotal:t,previous:S=>d(S).prev(),next:S=>d(S).next()}})();var ae=(()=>{let _=null,n=null,i=null,a=null,p=null,f=[],b=()=>`<div class="text-center p-4 mx-0 mt-0 mb-3 bg-theme-auto rounded-4 shadow"><p class="fw-bold p-0 m-0" style="font-size: 0.95rem;">${Z.on("id","Yuk, share undangan ini biar makin rame komentarnya!").on("en","Let's share this invitation to get more comments!").get()}</p></div>`,g=(s,m)=>{document.querySelector(`[data-button-action="${s}"]`).childNodes.forEach(h=>{h.disabled=m})},y=s=>{g(s,!1),document.getElementById(`inner-${s}`).remove()},x=s=>{s.comments&&s.comments.forEach(x);let m=document.getElementById(`body-content-${s.uuid}`);m.addEventListener("touchend",()=>ee.tapTap(m))},e=s=>{let m=s.getAttribute("data-uuids").split(","),h=s.getAttribute("data-show")==="true",k=s.getAttribute("data-uuid");h?(s.setAttribute("data-show","false"),s.innerText=`Show replies (${m.length})`,a.set("show",a.get("show").filter(L=>L!==k))):(s.setAttribute("data-show","true"),s.innerText="Hide replies",a.set("show",a.get("show").concat([k])));for(let L of m){a.set("hidden",a.get("hidden").map(C=>(C.uuid===L&&(C.show=!h),C)));let M=document.getElementById(L).classList;h?M.add("d-none"):M.remove("d-none")}},t=(s,m)=>{let h=document.getElementById(`content-${m}`),k=E.base64Decode(h.getAttribute("data-comment")),L=s.getAttribute("data-show")==="false";h.innerHTML=L?k:k.slice(0,X.maxCommentLength)+"...",s.innerText=L?"Sebagian":"Selengkapnya",s.setAttribute("data-show",L?"true":"false")},o=s=>{if(!D.isAdmin()||(s.comments&&s.comments.forEach(o),s.ip===void 0||s.user_agent===void 0||s.is_admin||i.has(s.ip)))return;let m=(h,k,L)=>{document.getElementById(`ip-${h}`).innerHTML=`<i class="fa-solid fa-location-dot me-1"></i>${E.escapeHtml(k)} <strong>${E.escapeHtml(L)}</strong>`};N(j,`https://freeipapi.com/api/json/${s.ip}`).default(J).then(h=>h.json()).then(h=>{let k=h.cityName+" - "+h.regionName;h.cityName==="-"&&h.regionName==="-"&&(k="localhost"),i.set(s.ip,k),m(s.uuid,s.ip,k)}).catch(h=>m(s.uuid,s.ip,h.message))},r=(s,m=[])=>(s.forEach(h=>{m.find(k=>k.uuid===h.uuid)||m.push(V.commentShowMore(h.uuid)),h.comments&&h.comments.length>0&&r(h.comments,m)}),m),l=()=>(p.getAttribute("data-loading")==="false"&&(p.setAttribute("data-loading","true"),p.innerHTML=X.renderLoading().repeat(W.getPer())),N(j,`/api/v2/comment?per=${W.getPer()}&next=${W.getNext()}&lang=${Z.getLanguage()}`).token(D.getToken()).send(V.getCommentsResponseV2).then(async s=>{p.setAttribute("data-loading","false");for(let h of f)await F.remove(h);if(s.data.lists.length===0)return p.innerHTML=b(),s;f=r(s.data.lists).map(h=>h.uuid),a.set("hidden",r(s.data.lists,a.get("hidden")));let m="";for(let h of s.data.lists)m+=await X.renderContent(h);return s.data.lists.length<W.getPer()&&(m+=b()),p.innerHTML=m,s.data.lists.forEach(o),s.data.lists.forEach(x),s}).then(s=>(W.setTotal(s.data.count),p.dispatchEvent(new Event("comment.result")),s)));return{gif:F,like:ee,pagination:W,init:()=>{F.init(),ee.init(),X.init(),W.init(),p=document.getElementById("comments"),p.addEventListener("comment.show",l),_=P("owns"),n=P("user"),i=P("tracker"),a=P("comment"),a.has("hidden")||a.set("hidden",[]),a.has("show")||a.set("show",[])},send:async s=>{let m=s.getAttribute("data-uuid"),h=document.getElementById("form-name"),k=h.value;if(D.isAdmin()&&(k=n.get("name")),k.length===0){alert("Name cannot be empty."),m&&document.getElementById("comment").scrollIntoView({behavior:"smooth"});return}let L=document.getElementById("form-presence");if(!m&&L&&L.value==="0"){alert("Please select your attendance status.");return}let M=F.isOpen(m||F.default),C=F.getResultId(m||F.default),c=F.buttonCancel(m);if(M&&!C){alert("Gif cannot be empty.");return}M&&C&&c.hide();let T=document.getElementById(`form-${m?`inner-${m}`:"comment"}`);if(!M&&T.value?.trim().length===0){alert("Comments cannot be empty.");return}!m&&h&&!D.isAdmin()&&(h.disabled=!0),!D.isAdmin()&&L&&L.value!=="0"&&(L.disabled=!0),T&&(T.disabled=!0);let $=document.querySelector(`[onclick="undangan.comment.cancel(this, '${m}')"]`);$&&($.disabled=!0);let R=E.disableButton(s),O=L?L.value==="1":!0;if(!D.isAdmin()){let I=P("information");I.set("name",k),m||I.set("presence",O)}let H=await N(K,`/api/comment?lang=${Z.getLanguage()}`).token(D.getToken()).body(V.postCommentRequest(m,k,O,M?null:T.value,C)).send(V.getCommentResponse).then(I=>I,()=>null);if(h&&(h.disabled=!1),T&&(T.disabled=!1),$&&($.disabled=!1),L&&(L.disabled=!1),M&&C&&c.show(),R.restore(),!(!H||H.code!==ne)){if(_.set(H.data.uuid,H.data.own),T&&(T.value=null),M&&C&&c.click(),!m){if(W.reset()){await l(),p.scrollIntoView({behavior:"smooth"});return}W.setTotal(W.geTotal()+1),p.children.length===W.getPer()&&p.lastElementChild.remove(),H.data.is_admin=D.isAdmin();let I=await X.renderContent(H.data);p.insertAdjacentHTML("afterbegin",I),p.scrollIntoView({behavior:"smooth"})}if(m){a.set("hidden",a.get("hidden").concat([V.commentShowMore(H.data.uuid,!0)])),a.set("show",a.get("show").concat([m])),y(m),H.data.is_admin=D.isAdmin(),document.getElementById(`reply-content-${m}`).insertAdjacentHTML("beforeend",await X.renderInnerContent(H.data));let I=document.getElementById(`button-${m}`).querySelector("a"),q=[H.data.uuid];I&&(I.getAttribute("data-show")==="false"&&e(I),I.remove()),ee.getButtonLike(m).insertAdjacentHTML("beforebegin",X.renderReadMore(m,I?I.getAttribute("data-uuids").split(",").concat(q):q))}x(H.data)}},edit:async s=>{let m=s.getAttribute("data-uuid");if(document.getElementById(`inner-${m}`))return;g(m,!0);let h=E.disableButton(s);await N(j,"/api/comment/"+m).token(D.getToken()).send(V.commentResponse).then(async k=>{if(k.code!==Q)return k;k.data.gif_url&&await F.remove(m);let L=document.getElementById(m).getAttribute("data-parent")==="true"&&!D.isAdmin();if(document.getElementById(`button-${m}`).insertAdjacentElement("afterend",X.renderEdit(m,k.data.presence,L,!!k.data.gif_url)),k.data.gif_url)return F.onOpen(m,()=>{F.removeGifSearch(m),F.removeButtonBack(m)}),F.open(m);let M=document.getElementById(`form-inner-${m}`);return M.value=k.data.comment,M.setAttribute("data-original",E.base64Encode(k.data.comment)),k}),h.restore(!0)},reply:async s=>{let m=s.getAttribute("data-uuid");if(document.getElementById(`inner-${m}`))return;g(m,!0);let h=E.disableButton(s);await F.remove(m),F.onOpen(m,()=>F.removeGifSearch(m)),h.restore(!0),document.getElementById(`button-${m}`).insertAdjacentElement("afterend",X.renderReply(m))},remove:async s=>{if(!confirm("Are you sure?"))return;let m=s.getAttribute("data-uuid");D.isAdmin()&&_.set(m,s.getAttribute("data-own")),g(m,!0);let h=E.disableButton(s),k=ee.getButtonLike(m);if(k.disabled=!0,!await N(ue,"/api/comment/"+_.get(m)).token(D.getToken()).send(V.statusResponse).then(M=>M.data.status,()=>!1)){h.restore(),k.disabled=!1;return}document.querySelectorAll('a[onclick="undangan.comment.showOrHide(this)"]').forEach(M=>{let C=M.getAttribute("data-uuids").split(",");if(C.find(c=>c===m)){let c=C.filter(T=>T!==m).join(",");c.length===0?M.remove():M.setAttribute("data-uuids",c)}}),_.unset(m),document.getElementById(m).remove(),p.children.length===0&&(p.innerHTML=b())},update:async s=>{let m=s.getAttribute("data-uuid"),h=!1,k=document.getElementById(`form-inner-presence-${m}`);k&&(k.disabled=!0,h=k.value==="1");let L=!1,M=document.getElementById(`badge-${m}`);M&&(L=M.getAttribute("data-is-presence")==="true");let C=F.isOpen(m),c=F.getResultId(m),T=F.buttonCancel(m);if(C&&!c){alert("Gif cannot be empty.");return}C&&c&&T.hide();let $=document.getElementById(`form-inner-${m}`);if(m&&!C&&E.base64Encode($.value)===$.getAttribute("data-original")&&L===h){y(m);return}if(!C&&$.value?.trim().length===0){alert("Comments cannot be empty.");return}$&&($.disabled=!0);let R=document.querySelector(`[onclick="undangan.comment.cancel(this, '${m}')"]`);R&&(R.disabled=!0);let O=E.disableButton(s),H=await N(de,`/api/comment/${_.get(m)}?lang=${Z.getLanguage()}`).token(D.getToken()).body(V.updateCommentRequest(k?h:null,C?null:$.value,c)).send(V.statusResponse).then(I=>I.data.status,()=>!1);if($&&($.disabled=!1),R&&(R.disabled=!1),k&&(k.disabled=!1),O.restore(),C&&c&&T.show(),!!H){if(C&&c&&(document.getElementById(`img-gif-${m}`).src=document.getElementById(`gif-result-${m}`)?.querySelector("img").src,T.click()),y(m),!C){let I=document.querySelector(`[onclick="undangan.comment.showMore(this, '${m}')"]`),q=X.convertMarkdownToHTML(E.escapeHtml($.value)),U=document.getElementById(`content-${m}`);q.length>X.maxCommentLength?(U.innerHTML=I?.getAttribute("data-show")==="false"?q.slice(0,X.maxCommentLength)+"...":q,U.setAttribute("data-comment",E.base64Encode(q)),I?.classList.replace("d-none","d-block")):(U.innerHTML=q,U.removeAttribute("data-comment"),I?.classList.replace("d-block","d-none"))}k&&(document.getElementById("form-presence").value=h?"1":"2",P("information").set("presence",h)),!(!k||!M)&&(M.classList.toggle("fa-circle-xmark",!h),M.classList.toggle("text-danger",!h),M.classList.toggle("fa-circle-check",h),M.classList.toggle("text-success",h))}},cancel:async(s,m)=>{let h=document.getElementById(`form-inner-presence-${m}`),k=h?h.value==="1":!1,L=document.getElementById(`badge-${m}`),M=L&&_.has(m)&&h?L.getAttribute("data-is-presence")==="true":!1;if(E.disableButton(s),F.isOpen(m)&&(!F.getResultId(m)&&M===k||confirm("Are you sure?"))){await F.remove(m),y(m);return}let C=document.getElementById(`form-inner-${m}`);(C.value.length===0||E.base64Encode(C.value)===C.getAttribute("data-original")&&M===k||confirm("Are you sure?"))&&y(m)},show:l,showMore:t,showOrHide:e}})();var be=(()=>{let _=null,n=()=>{let r=document.getElementById("count-down")?.getAttribute("data-time")?.replace(" ","T");if(!r){alert("Invalid countdown date.");return}let l=new Date(r).getTime(),u=()=>{let d=Math.abs(l-Date.now());document.getElementById("day").innerText=Math.floor(d/(1e3*60*60*24)).toString(),document.getElementById("hour").innerText=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)).toString(),document.getElementById("minute").innerText=Math.floor(d%(1e3*60*60)/(1e3*60)).toString(),document.getElementById("second").innerText=Math.floor(d%(1e3*60)/1e3).toString(),E.timeOut(u,1e3-Date.now()%1e3)};requestAnimationFrame(u)},i=()=>{let r=window.location.search.split("to="),l=null;if(r.length>1&&r[1].length>=1&&(l=window.decodeURIComponent(r[1])),l){let d=document.getElementById("guest-name"),v=document.createElement("div");v.classList.add("m-2"),v.innerHTML=`<small class="mt-0 mb-1 mx-0 p-0">${d?.getAttribute("data-message")}</small><p class="m-0 p-0" style="font-size: 1.5rem">${E.escapeHtml(l)}</p>`,d?.appendChild(v)}let u=document.getElementById("form-name");u&&(u.value=_.get("name")??l)},a=async()=>{let r=0,l=0,u=6e3,d=document.querySelectorAll(".slide-desktop");for(let[A,S]of d.entries())if(A===r){S.classList.add("slide-desktop-active"),await E.changeOpacity(S,!0);break}let v=async()=>{await E.changeOpacity(d[r],!1),d[r].classList.remove("slide-desktop-active"),r=(r+1)%d.length,d[r].classList.add("slide-desktop-active"),await E.changeOpacity(d[r],!0)},w=async A=>{A-l>=u&&(l=A,await v()),requestAnimationFrame(w)};E.timeOut(w,u)},p=r=>{r.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.dispatchEvent(new Event("undangan.open")),te.isAutoMode()&&(document.getElementById("button-theme").style.display="block"),a(),re.play(),te.spyTop(),ge(),E.timeOut(he,1500),E.changeOpacity(document.getElementById("welcome"),!1).then(l=>l.remove())},f=r=>{let l=document.getElementById("show-modal-image");l.src=r.src,l.width=r.width,l.height=r.height,pe.modal("modal-image").show()},b=()=>_.set("info",!0),g=()=>{document.querySelectorAll(".font-arabic").forEach(r=>{r.innerHTML=String(r.innerHTML).normalize("NFC")})},y=()=>{document.querySelectorAll("svg").forEach(r=>{E.timeOut(()=>r.classList.add(r.getAttribute("data-class")),parseInt(r.getAttribute("data-time")))})},x=()=>{let r=d=>new Date(d+":00Z").toISOString().replace(/[-:]/g,"").split(".")[0],l=new URL("https://calendar.google.com/calendar/render"),u={action:"TEMPLATE",text:"The Wedding of Reza and Yoga",dates:`${r("2025-04-20 10:00")}/${r("2025-04-20 11:00")}`,details:"Tanpa mengurangi rasa hormat, kami mengundang Anda untuk berkenan menghadiri acara pernikahan kami. Terima kasih atas perhatian dan doa restu Anda, yang menjadi kebahagiaan serta kehormatan besar bagi kami.",location:"https://maps.app.goo.gl/ZByUYTaH6DuHviVZ6",ctz:"Asia/Jakarta"};Object.entries(u).forEach(([d,v])=>l.searchParams.set(d,v)),document.querySelector("#home button")?.addEventListener("click",()=>window.open(l,"_blank"))},e=async()=>{y(),n(),i(),g(),x(),document.getElementById("root").style.opacity="1",_.has("presence")&&(document.getElementById("form-presence").value=_.get("presence")?"1":"2"),_.get("info")&&document.getElementById("information")?.remove(),window.AOS.init(),document.body.scrollIntoView({behavior:"instant"}),await E.changeOpacity(document.getElementById("welcome"),!0),await E.changeOpacity(document.getElementById("loading"),!1).then(r=>r.remove())},t=()=>{Z.init(),_e.init(),G.init(),_=P("information");let r=document.body.getAttribute("data-key");if(document.addEventListener("progress.done",()=>e()),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),(!r||r.length<=0)&&(G.add(),ie.init().load(),re.init(),document.getElementById("comment")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove()),r&&r.length>0){G.add(),G.add(),G.add();let l=ie.init();l.hasDataSrc()||l.load();let u=new URLSearchParams(window.location.search);D.setToken(u.get("k")??r),window.addEventListener("load",()=>D.guest().then(()=>{G.complete("config"),l.hasDataSrc()&&l.load(),re.init(),ae.init(),ae.show().then(()=>G.complete("comment")).catch(()=>G.invalid("comment"))}).catch(()=>G.invalid("config")))}};return{init:()=>(te.init(),D.init(),D.isAdmin()&&(P("user").clear(),P("owns").clear(),P("likes").clear(),P("session").clear(),P("comment").clear(),P("tracker").clear()),window.addEventListener("DOMContentLoaded",t),{util:E,theme:te,comment:ae,guest:{open:p,modal:f,closeInformation:b}})}})();(_=>{_.undangan=be.init()})(window);})();
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
